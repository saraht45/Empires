<object clone="/usr/UserAPI/obj/udat" owner="UserAPI">
  <UserAPI:UDat>
    <Core:Properties>
      <Core:Property property="array:assists"/>
      <Core:Property property="chat:alias">"Bear"</Core:Property>
      <Core:Property property="conn:check">0</Core:Property>
      <Core:Property property="conn:last">"Raakchui"</Core:Property>
      <Core:Property property="miki:watch:last">
         1139713197
      </Core:Property>
      <Core:Property property="more">18</Core:Property>
      <Core:Property property="revisions">
         (\{ 1085239959, "kargh", "P" \})
      </Core:Property>
      <Core:Property property="roster">([  ])</Core:Property>
      <Core:Property property="roster:extra">5</Core:Property>
      <Core:Property property="see:listeners">([  ])</Core:Property>
      <Core:Property property="skotos:linebreaks">1</Core:Property>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-extra"/>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-object">
         "AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-script">
         "lib:getmsglist"
      </Core:Property>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-stamp">
         1064080745
      </Core:Property>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-target">
         \<AzMail:lib:mailcode\>
      </Core:Property>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-text">
         "/* D=Gets the message list array \\n                                                                                                                                                              \\n     The following arguments are required: \\n       \$user: The actor obj \\n       \$folder: The folder you want the list from \\n       \$list: All, if you want the folder list, unread if you just want the list of unread mails \\n       \$loc: The location of the mailbox folder \\n*/ \\n                                                                                                                                                              \\n\{ \\n                                                                                                                                                              \\n  \$mbox = \$loc + \&quot;:mbox.\&quot; + ur_name(\$user)[16..]; \\n  \$mbox_folder = \&quot;mbox:array:\&quot; + lower_case(\$folder); \\n                                                                                                                                                              \\n  if (lower_case(\$list) == \&quot;all\&quot;) \{ \\n    \$msglist = ((\$r1 = Get(Obj(\$mbox), \$mbox_folder)) ? \$r1 : 0 ); \\n  \} else \{ \\n    \$msglist = Obj(\$mbox).\&quot;mbox:mapping:unread\&quot;; \\n  \} \\n                                                                                                                                                                  \\n  return \$msglist; \\n                                                                                                                                                              \\n\}"
      </Core:Property>
      <Core:Property property="source-0004af27cc590cd8f2903ae3d484d69d-title">
         "Merry script lib:getmsglist in AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-extra"/>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-object">
         "AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-script">
         "lib:creatembox"
      </Core:Property>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-stamp">
         1064080653
      </Core:Property>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-target">
         \<AzMail:lib:mailcode\>
      </Core:Property>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-text">
         "/* D=Creates a new mailbox for player if one does not exist \\n                                                                                                                                                              \\n     The following arguments are requird: \\n       \$obj: The object that needs a mailbox \\n       \$loc: The location of the mbox folder \\n       \$mailcmd: The mail command \\n \\n     mail::creatembox(\$obj: obj) \\n*/ \\n                                                                                                                                                              \\n\$mbox = \$loc + \&quot;:mbox.\&quot; + ur_name(\$obj)[16..]; \\n                                                                                                                                                              \\n/* \\n ************************************ \\n ** Create a new mailbox for object * \\n ************************************ \\n*/ \\n                                                                                                                                                              \\n\{ \\n                                                                                                                                                            \\n  if (!Obj(\$mbox)) \{ \\n    \$template = \$loc + \&quot;:templates:mbox-template\&quot;; \\n    \$newmbox = Duplicate(Obj(\$template)); \\n    \$newmbox.\&quot;base:objectname\&quot; = \$mbox; \\n    \$newmbox.\&quot;#creationstamp#\&quot; = time(); \\n    \$newmbox.\&quot;#owner#\&quot; = \$obj; \\n                                                                                                                                                              \\n    /* \\n     ******************************* \\n     * Creating new folder setting * \\n     ******************************* \\n    */ \\n \\n    \$newmbox.\&quot;mbox:array:folders\&quot; = (\{ \&quot;new\&quot; \}); \\n    \$newmbox.\&quot;mbox:array:new\&quot; = (\{ 1 \}); \\n    \$newmbox.\&quot;mbox:mapping:unread\&quot; = ([ 1:\&quot;new\&quot; ]); \\n    \$newmbox.\&quot;mbox:mail:current\&quot; = 1; \\n    \$newmbox.signature = \&quot;\&quot;; \\n                                                                                                                                                              \\n    /* \\n     ******************************** \\n     * Creating new welcome message * \\n     ******************************** \\n    */ \\n                                                                                                                                                             \\n    \$body = \&quot;Welcome to AzMail system v\&quot; + \$this.\&quot;#version#\&quot; + \&quot;! To see the available help for this system, type: \&quot; + \$mailcmd + \&quot; help\\\\n\\\\nIf you find any bugs in this system, please file a \\\\'bug\\\\' report and it shall be reported to Aziel.\\\\n\\\\nAgain, welcome and enjoy!\\\\nAziel\&quot;; \\n \\n    \$subject = \&quot;Welcome to AzMail!\&quot;; \\n \\n    \$newmbox.\&quot;msg.1\&quot; = ([ \&quot;Sender\&quot;:\$this, \&quot;UDatName\&quot;:\&quot;System\&quot;, \&quot;Theatre\&quot;:\&quot;System\&quot;, \&quot;DateSent\&quot;:time(), \&quot;DateRead\&quot;:\&quot;\&quot;, \&quot;Flags\&quot;:(\{ \}), \&quot;Recipients\&quot;:(\{ \$obj \}), \&quot;Body\&quot;:mail::xorcrypt(\$text: \$body, \$xor: ur_name(\$obj)[16..]), \&quot;Subject\&quot;:mail::xorcrypt(\$text: \$subject, \$xor: ur_name(\$obj)[16..]) ]);                                                                                                                                                         \\n \\n  \} \\n\}"
      </Core:Property>
      <Core:Property property="source-1796e925d1b17f4588afd3ff5fde1466-title">
         "Merry script lib:creatembox in AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-extra"/>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-object">
         "Lib:Assist:lib:assistpopup"
      </Core:Property>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-script">
         "lib:htmlheader"
      </Core:Property>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-stamp">
         1064088658
      </Core:Property>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-target">
         \<Lib:Assist:lib:assistpopup\>
      </Core:Property>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-text">
         "\$hlp = \&quot;\&lt;body background=\\\\\&quot;http://www.skotos.net/artwork/skoot_back.jpg\\\\\&quot; topmargin=\\\\\&quot;0\\\\\&quot; leftmargin=\\\\\&quot;0\\\\\&quot; marginwidth=\\\\\&quot;0\\\\\&quot; marginheight=\\\\\&quot;0\\\\\&quot;/\&gt;\&lt;table width=\\\\\&quot;100%\\\\\&quot; cellspacing=\\\\\&quot;0\\\\\&quot; cellpadding=\\\\\&quot;0\\\\\&quot; border=\\\\\&quot;0\\\\\&quot;\&gt;\&lt;tr\&gt;\&lt;td width=\\\\\&quot;25%\\\\\&quot;\&gt;\&lt;a href=\\\\\&quot;javascript:history.back()\\\\\&quot;\&gt;\&lt;button\&gt;Back!\&lt;/button\&gt;\&lt;/a\&gt;\&lt;/td\&gt;\&quot;; \\n \\n\$helplist = (\{ \&quot;help\&quot;, \&quot;basic\&quot;, \&quot;task\&quot;, \&quot;list\&quot;, \&quot;queue\&quot;, \&quot;login\&quot;, \&quot;misc\&quot;, \&quot;chat\&quot;, \&quot;all\&quot; \}); \\n \\n\$hlp += \&quot;\&lt;td width=\\\\\&quot;25%\\\\\&quot; align=\\\\\&quot;center\\\\\&quot;\&gt;\&lt;zform\&gt;\&lt;select name=\\\\\&quot;gohelp\\\\\&quot;\&gt;\&lt;option value=\\\\\&quot;basic\\\\\&quot;\&gt;Help List\&lt;/option\&gt;\&quot;; \\n \\nfor (\$i = 0; \$i \&lt; sizeof(\$helplist); \$i++) \{ \\n  \$hlp += \&quot;\&lt;option value=\\\\\&quot;\&quot; + \$helplist[\$i] + \&quot;\\\\\&quot;\&gt;\&quot; + capitalize(\$helplist[\$i]) + \&quot;\&lt;/option\&gt;\&quot;; \\n\} \\n \\n\$hlp += \&quot;\&lt;/select\&gt;\&lt;input type=\\\\\&quot;submit\\\\\&quot; name=\\\\\&quot;dohelp\\\\\&quot; value=\\\\\&quot;Help!\\\\\&quot;/\&gt;\&lt;input type=\\\\\&quot;hidden\\\\\&quot; name=\\\\\&quot;actor\\\\\&quot; value=\\\\\&quot;\$(actor)\\\\\&quot;/\&gt;\&lt;input type=\\\\\&quot;hidden\\\\\&quot; name=\\\\\&quot;data\\\\\&quot; value=\\\\\&quot;\$(data)\\\\\&quot;/\&gt;\&lt;input type=\\\\\&quot;hidden\\\\\&quot; name=\\\\\&quot;cmd\\\\\&quot; value=\\\\\&quot;\$(cmd)\\\\\&quot;/\&gt;\&lt;action\&gt;\&lt;redirect propob=\\\\\&quot;OBJ(Lib:Assist:lib:assistpopup)\\\\\&quot; prop=\\\\\&quot;html:dohelp\\\\\&quot; actor=\&quot; + Str(\$actor) + \&quot; data=\&quot; + Str(\$data) + \&quot; cmd=\\\\\&quot;\&quot; + \$cmd + \&quot;\\\\\&quot; command=\\\\\&quot;\&quot; + \$cmd + \&quot;\\\\\&quot; help=\\\\\&quot;\$[\$gohelp]\\\\\&quot;/\&gt;\&lt;/action\&gt;\&lt;/zform\&gt;\&lt;/td\&gt;\&quot;; \\n \\n\$select = \&quot;\&quot;; \\n \\n\$dropdown = \&quot;\&lt;td width=\\\\\&quot;25%\\\\\&quot; align=\\\\\&quot;center\\\\\&quot;\&gt;\&lt;zform\&gt;\&lt;select name=\\\\\&quot;select\\\\\&quot;\&gt;\&lt;option value=\\\\\&quot;new\\\\\&quot;\&gt;Queue List\&lt;/option\&gt;\&quot;; \\n \\nfor (\$i = 0; \$i \&lt; sizeof(Obj(\$data).\&quot;array:queues\&quot;); \$i++) \{ \\n  \$dropdown += \&quot;\&lt;option value=\\\\\&quot;\&quot; + Obj(\$data).\&quot;array:queues\&quot;[\$i] + \&quot;\\\\\&quot;\&gt;\&quot; + capitalize(Obj(\$data).\&quot;array:queues\&quot;[\$i]) + \&quot;\&lt;/option\&gt;\&quot;; \\n\} \\n \\n \\n\$dropdown += \&quot;\&lt;/select\&gt;\&lt;input type=\\\\\&quot;submit\\\\\&quot; name=\\\\\&quot;decide\\\\\&quot; value=\\\\\&quot;Show!\\\\\&quot;/\&gt;\&lt;input type=\\\\\&quot;hidden\\\\\&quot; name=\\\\\&quot;actor\\\\\&quot; value=\\\\\&quot;\$(actor)\\\\\&quot;/\&gt;\&lt;input type=\\\\\&quot;hidden\\\\\&quot; name=\\\\\&quot;data\\\\\&quot; value=\\\\\&quot;\$(data)\\\\\&quot;/\&gt;\&lt;input type=\\\\\&quot;hidden\\\\\&quot; name=\\\\\&quot;cmd\\\\\&quot; value=\\\\\&quot;\$(cmd)\\\\\&quot;/\&gt;\&lt;action\&gt;\&lt;redirect propob=\\\\\&quot;OBJ(Lib:Assist:lib:assistpopup)\\\\\&quot; prop=\\\\\&quot;html:popup\\\\\&quot; actor=\&quot; + Str(\$actor) + \&quot; data=\&quot; + Str(\$data) + \&quot; cmd=\\\\\&quot;\&quot; + \$cmd + \&quot;\\\\\&quot; input=\\\\\&quot;ignore, \$[\$select]\\\\\&quot; tas=\\\\\&quot;\&quot; + Obj(\$data).\&quot;#systemname#\&quot; + \&quot;\\\\\&quot;/\&gt;\&lt;/action\&gt;\&lt;/zform\&gt;\&lt;/td\&gt;\&lt;td width=\\\\\&quot;25%\\\\\&quot; align=\\\\\&quot;right\\\\\&quot;\&gt;\&lt;a href=\\\\\&quot;javascript:history.forward()\\\\\&quot;\&gt;\&lt;button\&gt;Forward!\&lt;/button\&gt;\&lt;/a\&gt;\&lt;/td\&gt;\&lt;/tr\&gt;\&lt;/table\&gt;\&quot;; \\n \\n\$hlp += \$dropdown; \\n \\nObj(\$actor).\&quot;html:header:help\&quot; = \$hlp; \\n \\nreturn \$hlp;"
      </Core:Property>
      <Core:Property property="source-2db3cd0f4340c8ea3c155d570c99c431-title">
         "Merry script lib:htmlheader in Lib:Assist:lib:assistpopup"
      </Core:Property>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-extra"/>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-object">
         "AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-script">
         "lib:readmessage"
      </Core:Property>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-stamp">
         1064125976
      </Core:Property>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-target">
         \<AzMail:lib:mailcode\>
      </Core:Property>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-text">
         "/* D=Gets message mapping\\n\\n     The following arguments are required:\\n       \$loc: The folder for mailboxes\\n       \$msg_num: The message number\\n\\n     Returns:\\n       \$msg_map: 0 if any error (bad number, no such message, etc) or message mapping\\n\\n*/\\n\\n\{\\n\\n  /*\\n   *****************************************\\n   * Is the number supplied a valid number *\\n   *****************************************\\n  */\\n\\n  if ((sscanf(\$msg_num, \&quot;%d%s\&quot;, \$number, \$dummy) == 2 \&amp;\&amp; strlen(\$dummy)) \|\| sscanf(\$msg_num, \&quot;%d%s\&quot;, \$number, \$dummy) == 0) \{\\n    \$msg_map = 0;\\n    return \$msg_map;\\n  \}\\n\\n  /*\\n   ************************************************************\\n   * Is there a message that corresponds with supplied number *\\n   * \$msglist is the returned property                        *\\n   ************************************************************\\n  */\\n\\n  if (Int(\$msg_num) == 0) \{ \$msg_map = 0; return \$msg_map; \}\\n\\n  mail::getmsglist(\$list: \&quot;all\&quot;);\\n\\n  if (typeof(\$msglist) != 5) \{ \$msg_map = 0; return \$msg_map; \}\\n\\n  if (Int(\$msg_num) \&gt; sizeof(\$msglist)) \{ \$msg_map = 0; return \$msg_map; \}\\n\\n  /*\\n   ***************************************************\\n   * If this message is unread, lets mark it as read *\\n   ***************************************************\\n  */\\n\\n  \$mbox = \$loc + \&quot;:mbox.\&quot; + ur_name(\$actor)[16..];\\n  if (member(Int(\$msg_num), map_indices(Obj(\$mbox).\&quot;mbox:mapping:unread\&quot;))) \{\\n    Obj(\$mbox).\&quot;mbox:mapping:unread\&quot;[Int(\$msg_num)] = nil;\\n  \}\\n\\n  /*\\n   *************************************************************\\n   * Everything is good so get the message map for the message *\\n   * Return \$msg_map                                           *  \\n   *************************************************************\\n  */\\n\\n  \$msg_map = mail::getmsgmap();\\n  return \$msg_map;\\n\\n\}"
      </Core:Property>
      <Core:Property property="source-3a539f0873631dc45d5f84cecc39acfb-title">
         "Merry script lib:readmessage in AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-extra"/>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-object">
         "AzMail:lib:mailcmd"
      </Core:Property>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-script">
         "lib:docmd"
      </Core:Property>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-stamp">
         1064507487
      </Core:Property>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-target">
         \<AzMail:lib:mailcmd\>
      </Core:Property>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-text">
         "/* Figure out how it is being used  \\n \\n     The following arguments are required: \\n       \$data: The db object \\n       \$cmd: The command \\n*/ \\n \\n \\nif (!\$(dob:words) \&amp;\&amp; !\$evoke) \{ mailcmd::listmailfolder(); return FALSE; \}\\nif (sizeof(\$(dob:words)) == 1 \&amp;\&amp; !\$evoke) \{ mailcmd::displaymessage(); return FALSE; \}\\n\\n\$cmd = \$(dob:words)[0];\\n\\nif (\$cmd == \&quot;address\&quot; \&amp;\&amp; sizeof(\$(dob:words)) == 1 \&amp;\&amp; \$evoke) \{ mailcmd::addressmessage(); return FALSE; \}\\n\\n\\nEmitTo(\$actor, \&quot;Default confusion message.\&quot;);\\n\\n\\n/*\\nif (!\$(dob:words) \&amp;\&amp; !\$evoke) \{ assist::dolistwhat(\$data: \$data, \$cmd: \$cmd, \$words: (\{ \&quot;new\&quot; \})); return FALSE; \} \\nif (!\$(dob:words) \&amp;\&amp; \$evoke) \{ chat::chat(\$channel: \&quot;tas\&quot;, \$staff: TRUE); return FALSE; \} \\n \\n\$command = \$(dob:words)[0]; \\n \\nif (\$command == \&quot;who\&quot;) \{ chat::chat(\$channel: \&quot;tas\&quot;, \$staff: TRUE); return FALSE; \} \\n*/"
      </Core:Property>
      <Core:Property property="source-6b2e4e1323d764092ba92c3f11d8a292-title">
         "Merry script lib:docmd in AzMail:lib:mailcmd"
      </Core:Property>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-extra"/>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-object">
         "AzMail:lib:mailcmd"
      </Core:Property>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-script">
         "lib:listmailfolder"
      </Core:Property>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-stamp">
         1064080645
      </Core:Property>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-target">
         \<AzMail:lib:mailcmd\>
      </Core:Property>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-text">
         "/* D=Lists contents of supplied folder */\\n\\n\\n\{\\n\\n  /*\\n   **************************\\n   * Get contents of folder *\\n   **************************\\n  */\\n\\n  mail::listmailfolder();\\n\\n  /*\\n   ***********************************\\n   * Create and emit table to player *\\n   ***********************************\\n  */\\n\\n  mail::tablepresent();\\n\\n\}"
      </Core:Property>
      <Core:Property property="source-7962eab34abd811a7d96199e56d8d01d-title">
         "Merry script lib:listmailfolder in AzMail:lib:mailcmd"
      </Core:Property>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-extra"/>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-object">
         "AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-script">
         "lib:getmbox"
      </Core:Property>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-stamp">
         1064416901
      </Core:Property>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-target">
         \<AzMail:lib:mailcode\>
      </Core:Property>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-text">
         "/* D=Takes username and returns mailbox object.\\n\\n     The following arguments are required:\\n       \$user: The user object\\n       \$loc: The mbox folder location\\n\\n     The following arguments are optional:\\n       \$create: If TRUE, create mailbox if one does not exist\\n*/\\n\\n\{ \\n  \$mbox = \$loc + \&quot;:mbox.\&quot; + ur_name(\$user)[16..];\\n  if (!Obj(\$mbox) \&amp;\&amp; !\$create) \{ \\n    \$mbox = nil; \\n  \} else if (!Obj(\$mbox) \&amp;\&amp; \$create) \{\\n    mail::creatembox(\$obj: \$user, \$mailcmd: \$mailcmd);\\n    mail::getmbox(\$user: \$user, \$loc: \$loc, \$create: TRUE);\\n  \} else if (Obj(\$mbox)) \{\\n    \$mbox = Obj(\$mbox);\\n  \}\\n  return \$mbox;\\n\}"
      </Core:Property>
      <Core:Property property="source-91125636f4af9755a00e5df92fcffdd1-title">
         "Merry script lib:getmbox in AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-extra"/>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-object">
         "AzMail:lib:mailcmd"
      </Core:Property>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-script">
         "lib:displaymessage"
      </Core:Property>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-stamp">
         1064091018
      </Core:Property>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-target">
         \<AzMail:lib:mailcmd\>
      </Core:Property>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-text">
         "/* D=Displays message */\\n\\n\\n\{\\n\\n  mail::readmessage(\$msg_num: \$(dob:words)[0]);\\n\\n  if (typeof(\$msg_map) == 6) \{ \\n\\n  \$output = pad_right(\&quot;Message: \&quot; + \$(dob:words)[0], 19) + pad_right(\&quot;Folder: \&quot; + capitalize(\$folder), 21)[..19] + pad_left(\&quot;Flags: \&quot; + implode(\$msg_map[\&quot;Flags\&quot;], \&quot;, \&quot;), 19) + \&quot;\\\\n\&quot;;\\n\\n  \$output += \&quot;---------------------------------------------------------\\\\n\&quot;;\\n\\n  \$output += pad_left(\&quot;From: \&quot;, 9) + common::get_name(\$src: \$msg_map[\&quot;Sender\&quot;]) + \&quot;@\&quot; + ((\$r1 = \$msg_map[\&quot;Sender\&quot;].\&quot;theatre:id\&quot;) ? \$r1 : \&quot;Unknown\&quot;) + \&quot;\\\\n\&quot; + pad_left(\&quot;To: \&quot;, 9);\\n\\n  \$to = \&quot;\&quot;;\\n  for (\$i = 0; \$i \&lt; sizeof(\$msg_map[\&quot;Recipients\&quot;]); \$i++) \{\\n     \$to += (sizeof(\$msg_map[\&quot;Recipients\&quot;]) == 1 ? common::get_name(\$src: \$msg_map[\&quot;Recipients\&quot;][\$i]) + \&quot;@\&quot; + ((\$r1 = \$msg_map[\&quot;Recipients\&quot;][\$i].\&quot;theatre:id\&quot;) ? \$r1 : \&quot;Unknown\&quot;) : (\$i == sizeof(\$msg_map[\&quot;Recipients\&quot;])-1 ? \&quot; and \&quot; : \&quot;, \&quot;) + common::get_name(\$src: \$msg_map[\&quot;Recipients\&quot;][\$i]) + \&quot;@\&quot; + ((\$r1 = \$msg_map[\&quot;Recipients\&quot;][\$i].\&quot;theatre:id\&quot;) ? \$r1 : \&quot;Unknown\&quot;));\\n\\n  \}\\n\\n  \$output += \$to + \&quot;\\\\n\&quot; + pad_left(\&quot;Date: \&quot;, 9) + ctime(\$msg_map[\&quot;DateSent\&quot;]) + \&quot; (\&quot; + common::convsecs(\$secs: time() - \$msg_map[\&quot;DateSent\&quot;], \$short: \&quot;true\&quot;) + \&quot; )\\\\n\&quot; + pad_left(\&quot;Subject: \&quot;, 9) + mail::xorcrypt(\$text: \$msg_map[\&quot;Subject\&quot;], \$xor: Int(ur_name(\$actor)[16..])) + \&quot;\\\\n\&quot;;\\n\\n  \$output += \&quot;---------------------------------------------------------\\\\n\\\\n\&quot;;\\n\\n  \$output += common::wrap(\$string: mail::xorcrypt(\$text: \$msg_map[\&quot;Body\&quot;], \$xor: Int(ur_name(\$actor)[16..])), \$maxlength: 60);\\n\\n  \$output += \&quot;---------------------------------------------------------\\\\n\&quot;;\\n\\n  EmitTo(\$actor, PRE(\$output));\\n\\n  \} else \{\\n\\n    EmitTo(\$actor, \&quot;That is an invalid message to read.\&quot;);\\n\\n  \}\\n\\n\}"
      </Core:Property>
      <Core:Property property="source-b672cefe8dbf44f6c5642ba740fce5ab-title">
         "Merry script lib:displaymessage in AzMail:lib:mailcmd"
      </Core:Property>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-extra"/>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-object">
         "AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-script">
         "lib:addresslist"
      </Core:Property>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-stamp">
         1064106514
      </Core:Property>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-target">
         \<AzMail:lib:mailcode\>
      </Core:Property>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-text">
         "/* D=Creates the mapping of addresses\\n\\n     The following arguments are required:\\n       \$evoke: The evoke\\n\\n     The addresses are in the form of Name@Theatre or just Name\\n     If only name is provided, it assumes your theatre and attempts to locate body\\n\\n     If name@theatre is not located, it adds name@theatre to \$addresses_bad\\n\\n     Returned:\\n       \$addresses_good: The array of good addresses, obj:theatre\\n       \$addresses_bad: The array of bad addresses, string:theatre\\n\\n*/\\n\\n\{\\n\\n  /*\\n   **************************************************************************************\\n   * Parse the evoke into two arrays, one of good addresses, the other of bad addresses *\\n   **************************************************************************************\\n  */\\n\\n  \$addresses_good = (\{ \});\\n  \$addresses_bad = (\{ \});\\n\\n  \$addresses = explode(\$evoke, \&quot;; \&quot;);\\n\\n  for (\$i = 0; \$i \&lt; sizeof(\$addresses); \$i++) \{\\n    \$count = 0;\\n    \$add_id = explode(\$addresses[\$i], \&quot;@\&quot;);\\n    \$address_name = lower_case(\$add_id[0]);\\n    \$address_id = (sizeof(\$add_id) == 2 ? lower_case(\$add_id[1]) : ((\$r1 = \$actor.\&quot;theatre:id\&quot;) ? lower_case(\$r1) : \&quot;unknown\&quot;));\\n\\n    if (\$address_id == \&quot;unknown\&quot;) \{ \$addresses_bad += (\{ \$addresses[\$i] \}); continue; \}\\n\\n    \$bodies_all = Get(udat::, \&quot;all-bodies:\&quot; + \$address_name);\\n\\n    if (\$bodies_all == nil \|\| sizeof(\$bodies_all) == 0) \{ \$addresses_bad += (\{ \$addresses[\$i] \}); continue; \}\\n\\n    for (\$x = 0; \$x \&lt; sizeof(\$bodies_all); \$x++) \{\\n      if (\$bodies_all[\$x].\&quot;theatre:id\&quot; \&amp;\&amp; lower_case(\$bodies_all[\$x].\&quot;theatre:id\&quot;) == \$address_id) \{\\n        \$addresses_good += (\{ \$bodies_all[\$x] \});\\n        \$count++;\\n        continue;\\n      \}\\n    \}    \\n\\n    if (\$count == 0) \$addresses_bad += (\{ \$addresses[\$i] \}); \\n\\n  \}\\n\\n  return \$addresses_good, \$addresses_bad;\\n\\n\}"
      </Core:Property>
      <Core:Property property="source-bd77155bdcb54473c55165ddfaf28570-title">
         "Merry script lib:addresslist in AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-extra"/>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-object">
         "AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-script">
         "lib:listmailfolder"
      </Core:Property>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-stamp">
         1064081145
      </Core:Property>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-target">
         \<AzMail:lib:mailcode\>
      </Core:Property>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-text">
         "/* D=Lists contents of folder. Default 'new' folder if none are listed \\n                                                                                                                                                              \\n     The following arguments are optional: \\n       \$mail_folder: The mail folder to list \\n*/ \\n \\nint *msg_list, i; \\nmixed *msg_list_arr; \\nmapping msg_map; \\n                                                                                                                                                              \\n\{ \\n  /* \\n   ************************************************************************************** \\n   * Create the header and array for these messages. If none, note that folder is empty * \\n   ************************************************************************************** \\n  */ \\n                                                                                                                                                              \\n  msg_list = mail::getmsglist(\$user: \$actor, \$folder: \$folder, \$list: \&quot;all\&quot;);                                                                                                                                                              \\n \\n  if (sizeof(msg_list) \&gt; 0) \{ \\n    msg_list = map_indices(arr_to_set(msg_list)); \\n    msg_list_arr = (\{ (\{ \&quot;#\&quot;, \&quot;F\&quot;, \&quot;U\&quot;, \&quot;Date\&quot;, \&quot;Sender\&quot;, \&quot;Subject\&quot; \}) \}); \\n \\n    for (i = 0; i \&lt; sizeof(msg_list); i++) \{ \\n      msg_map = mail::getmsgmap(\$user: \$actor, \$msg_num: msg_list[i]); \\n      msg_list_arr += (\{ (\{ Str(i + 1), \\n                         (sizeof(msg_map[\&quot;Flags\&quot;]) \&gt; 0 ? implode(msg_map[\&quot;Flags\&quot;], \&quot;\&quot;) : \&quot; \&quot;), \\n                         (member(msg_list[i], map_indices(mail::getmsglist(\$user: \$actor, \$list: \&quot;unread\&quot;))) == 0 ? \&quot; \&quot; : \&quot;*\&quot;), \\n                         short_time(msg_map[\&quot;DateSent\&quot;]), \\n                         common::get_name(\$src: msg_map[\&quot;Sender\&quot;]), \\n                         mail::xorcrypt(\$text: msg_map[\&quot;Subject\&quot;], \$xor: ur_name(\$actor)[16..]) \\n                      \}) \}); \\n    \} \\n \\n  \} \\n                                                                                                                                                              \\n  \$output_header = \&quot;Date: \&quot; + ctime(time()) + \&quot;\\\\n\&quot;; \\n  \$output_footer = \&quot;Message Count: \&quot; + Str(sizeof(msg_list)) + \&quot;\\\\n\&quot;; \\n  \$output_body = msg_list_arr; \\n                                                                                                                                                              \\n  return \$output_body, \$output_header, \$output_footer; \\n                                                                                                                                                              \\n\}"
      </Core:Property>
      <Core:Property property="source-d2ff9895e505aaa47d4fbe6c02e5b052-title">
         "Merry script lib:listmailfolder in AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-extra"/>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-object">
         "AzMail:lib:mailcmd"
      </Core:Property>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-script">
         "lib:addressmessage"
      </Core:Property>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-stamp">
         1064514360
      </Core:Property>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-target">
         \<AzMail:lib:mailcmd\>
      </Core:Property>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-text">
         "/* D=Sets address array for new mail\\n\\n     The following arguments are required:\\n       \$evoke: List of names to send message to in the form of name or name@theatre (raw-evoke)\\n*/\\n\\n\{\\n\\n  \$user_mbox = mail::getmbox(\$user: \$actor);\\n\\n  if (\$user_mbox.\&quot;msg:draft:addresses\&quot; \|\| \$user_mbox.\&quot;msg:draft:body\&quot; \|\| \$user_mbox.\&quot;msg:draft:subject\&quot;) \{\\n    EmitTo(\$actor, \&quot;You already have a message in progress. See 'proof' to see the message or 'discard' to discard your current message.\&quot;);\\n    return FALSE;\\n  \}\\n\\n  /*\\n   *******************************************************\\n   * Lets see if any of our supplied addresses are valid *\\n   *******************************************************\\n  */\\n\\n  mail::addresslist(\$evoke: \$(raw-evoke));\\n\\n  if (sizeof(\$addresses_good) == 0) \{ EmitTo(\$actor, \&quot;I am unable to find any good addresses for the names you supplied.\&quot;); return FALSE; \}\\n\\n  mail::getmbox(\$user: \$actor).\&quot;msg:draft:addresses\&quot; = \$addresses_good;\\n\\n  \$strgood = \&quot;\&quot;;\\n  \$strbad = \&quot;\&quot;;\\n\\n  for (\$i = 0; \$i \&lt; sizeof(\$addresses_good); \$i++) \{\\n    if (\$i == sizeof(\$addresses_good)-1) \{\\n      \$strgood += Describe((\$r1 = \$addresses_good[\$i])) + \&quot;@\&quot; + ((\$r2 = \$r1.\&quot;theatre:id\&quot;) ? capitalize(\$r2) : \&quot;Unknown\&quot;);\\n      continue;\\n    \}\\n    if (\$i == sizeof(\$addresses_good)-2) \{\\n      \$strgood += Describe((\$r1 = \$addresses_good[\$i])) + \&quot;@\&quot; + ((\$r2 = \$r1.\&quot;theatre:id\&quot;) ? capitalize(\$r2) : \&quot;Unknown\&quot;) + \&quot; and \&quot;;\\n      continue;\\n    \}\\n    \$strgood += Describe((\$r1 = \$addresses_good[\$i])) + \&quot;@\&quot; + ((\$r2 = \$r1.\&quot;theatre:id\&quot;) ? capitalize(\$r2) : \&quot;Unknown\&quot;) + \&quot;, \&quot;;\\n    continue;\\n  \}\\n\\n  for (\$i = 0; \$i \&lt; sizeof(\$addresses_bad); \$i++) \{\\n    if (\$i == sizeof(\$addresses_bad)-1) \{\\n      \$strbad += \$addresses_bad[\$i];\\n      continue;\\n    \}\\n    if (\$i == sizeof(\$addresses_bad)-2) \{\\n      \$strbad += \$addresses_bad[\$i] + \&quot; and \&quot;;\\n      continue;\\n    \}\\n    \$strbad += \$addresses_bad[\$i] + \&quot;, \&quot;;\\n    continue;\\n  \}\\n\\nEmitTo(\$actor, \&quot;You have addressed your message to \&quot; + \$strgood + (strlen(\$strbad) \&gt; 0 ? \&quot;. The following names were not found: \&quot; + \$strbad + \&quot;.\&quot; : \&quot;.\&quot;));\\n\\nreturn FALSE;\\n\\n\}"
      </Core:Property>
      <Core:Property property="source-d5022952581e75e0b129110d0d52cf57-title">
         "Merry script lib:addressmessage in AzMail:lib:mailcmd"
      </Core:Property>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-cb-fun">
         "merry_edit_commit"
      </Core:Property>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-cb-obj">
         \</usr/Tool/sys/merry\>
      </Core:Property>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-extra"/>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-language">
         "Merry"
      </Core:Property>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-object">
         "AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-script">
         "lib:docmd"
      </Core:Property>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-stamp">
         1064083309
      </Core:Property>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-target">
         \<AzMail:lib:mailcode\>
      </Core:Property>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-text"/>
      <Core:Property property="source-ef311ee7e84f25df68492760f60460c2-title">
         "Merry script lib:docmd in AzMail:lib:mailcode"
      </Core:Property>
      <Core:Property property="tas:lastalert">
         1139713197
      </Core:Property>
      <Core:Property property="theme:name">
         "p_Kargh_Oasis"
      </Core:Property>
      <Core:Property property="tool:config:text-height">
         "55"
      </Core:Property>
      <Core:Property property="tool:config:text-width">
         "125"
      </Core:Property>
      <Core:Property property="tool:edit_history">
         ([ "Data:DB:assist:AssistCalendarDB":\<Data:DB:assist:AssistCalendarDB\>, "Data:DB:assist:AssistGeneralDB":\<Data:DB:assist:AssistGeneralDB\>, "Data:NIP:functions":\<Data:NIP:functions\>, "IronClaw:Staff:Angelo:Clothes:CrumpledCloak":\<IronClaw:Staff:Angelo:Clothes:CrumpledCloak\>, "Lib:Assist:lib:assistcmd":\<Lib:Assist:lib:assistcmd\>, "Lib:Assist:lib:assistlibs":\<Lib:Assist:lib:assistlibs\>, "Lib:NIP:basefuns":\<MOVED:20080918-114107:Lib:NIP:basefuns\>, "Lib:chatlib":\<Lib:chatlib\>, "Lib:common":\<Lib:common\>, "Lib:filter:lfc":\<MOVED:20080918-114107:Lib:filter:lfc\>, "Neoct:IC:Actions:leave":\<MOVED:20080918-114107:Neoct:IC:Actions:leave\>, "Neoct:IC:Verbs:leave":\<Neoct:IC:Verbs:leave\>, "Neoct:Staff:Verbs:Assist:task":\<MOVED:20080918-114107:Neoct:Staff:Verbs:Assist:task\>, "SLib:common":\<SLib:common\>, "UserAPI:UDats:k:kargh":\<UserAPI:UDats:k:kargh\> ])
      </Core:Property>
      <Core:Property property="tool:edit_obj">
         "IronClaw:Staff:Angelo:Clothes:CrumpledCloak"
      </Core:Property>
      <Core:Property property="tool:edit_prop">
         "merry:react-post:wear"
      </Core:Property>
      <Core:Property property="tool:lastprop">
         ([ \<Data:DB:assist:AssistGeneralDB\>:"mapping:queues:relay", \<IronClaw:Staff:Angelo:Clothes:CrumpledCloak\>:"merry:react-post:wear" ])
      </Core:Property>
      <Core:Property property="tool:recent">
         ([ \<Data:DB:assist:AssistGeneralDB\>:1139330465, \<IronClaw:Staff:Angelo:Clothes:CrumpledCloak\>:1139331560 ])
      </Core:Property>
    </Core:Properties>
    <UserAPI:Bodies/>
  </UserAPI:UDat>
</object>
